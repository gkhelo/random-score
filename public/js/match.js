const Match={create(e){let t=document.createElement("div");t.className="league-matches";let a=Collapsible.create(e.name,"#3eb650","#000000"),s=document.createElement("ul");return e.matches.forEach(e=>{let t=document.createElement("li");t.appendChild(this.createSingleMatch(e,!1)),s.appendChild(t)}),t.appendChild(a),t.appendChild(s),t},createSingleMatch(e,t){let a=document.createElement("div");a.className="match",a.id=e._id;let s=this.createStatus(e,t),c=!1;"FINISHED"==e.status&&e.homeScore>e.guestScore&&(c=!0);let i=this.createTeam(e.homeTeam,c,!1),r=this.createLogo(e.homeTeam),l=this.createScore(e._id,e.homeScore,e.guestScore,e.status),d=this.createLogo(e.guestTeam),n=!1;"FINISHED"==e.status&&e.homeScore<e.guestScore&&(n=!0);let o=this.createTeam(e.guestTeam,n,!1);return a.appendChild(s),a.appendChild(i),a.appendChild(r),a.appendChild(l),a.appendChild(d),a.appendChild(o),a},createMiniSingleMatch(e){let t=document.createElement("div");t.className="mini-match",t.id=e._id;let a=!1;"FINISHED"==e.status&&e.homeScore>e.guestScore&&(a=!0);let s=this.createTeam(e.homeTeam,a,!0),c=this.createLogo(e.homeTeam),i=this.createScore(e._id,e.homeScore,e.guestScore,e.status),r=!1;"FINISHED"==e.status&&e.homeScore<e.guestScore&&(r=!0);let l=this.createTeam(e.guestTeam,r,!0),d=this.createLogo(e.guestTeam);return t.appendChild(s),t.appendChild(c),t.appendChild(i),t.appendChild(d),t.appendChild(l),t},update(e){let t=document.getElementById(e._id);t.style.display="grid";let a=t.children;if(this.updateStatus(e,a[0]),"FINISHED"==e.status){let t=e.homeScore-e.guestScore;t>0?this.boldTeamDiv(a[1]):t<0&&this.boldTeamDiv(a[5])}"NOT_STARTED"!=e.status&&this.updateScore(e.homeScore,e.guestScore,e.status,a[3])},createStatus(e,t){let a=document.createElement("div");return a.className="match-status",this.updateStatus(e,a,t),a},updateStatus(e,t,a){let s=e.status;if("NOT_STARTED"==s)t.innerHTML=a?`Day ${e.day} - ${e.time}`:e.time;else if("FINISHED"==s)a?t.innerHTML=`Day ${e.day} - ${e.time}`:(t.innerText="Finished",t.classList.remove("match-live"));else{t.innerText=e.minute,t.classList.add("match-live");let a=document.createElement("span");a.innerText="'",a.className="blinker",t.appendChild(a)}},createTeam(e,t,a){let s=document.createElement("div");return s.className="match-team",s.id=e._id,s.innerText=a?e.code:e.name,t&&this.boldTeamDiv(s),s},boldTeamDiv(e){e.style.fontWeight="bold"},createLogo(e){let t=document.createElement("div");t.className="team-logo-wrapper";let a=document.createElement("img");return a.src=e.logo,a.className="team-logo",a.id=e._id,a.addEventListener("click",()=>{Team.fetchTeamInfo(a.id,e=>{Popup.show("Team Info",TeamPopup.content(e))})}),t.appendChild(a),t},createScore(e,t,a,s){let c=document.createElement("div");return c.className="match-score",c.setAttribute("status",s),c.addEventListener("click",()=>{"NOT_STARTED"==c.getAttribute("status")&&Match.fetchPreview(e,e=>{Popup.show("Match Preview",MatchPreviewPopup.content(e))})}),"NOT_STARTED"==s?(c.classList.add("preview"),c.innerText="Preview"):(c.classList.remove("preview"),this.updateScore(t,a,s,c)),c},updateScore(e,t,a,s){s.setAttribute("status",a),"INPLAY"==a?(s.classList.remove("preview"),s.classList.add("match-live")):"FINISHED"==a&&s.classList.remove("match-live"),s.innerText=e+" - "+t},hide(e){document.getElementById(e._id).style.display="none"},hideAll(){let e=document.getElementsByClassName("match");Array.prototype.forEach.call(e,e=>{e.style.display="none"})},filter(e,t){let a=[];return e.forEach(e=>{e.status==t&&a.push(e)}),a},fetchPreview(e,t){fetch(Server.getUrl("/api/matches/preview/"+e)).then(e=>e.json()).then(t).catch(e=>{console.log("Error occured during fetching match preview:",e)})}};